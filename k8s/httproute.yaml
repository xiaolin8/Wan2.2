apiVersion: gateway.networking.k8s.io/v1
kind: HTTPRoute
metadata:
  name: maas-video-job-route
  namespace: aibrix-system
spec:
  parentRefs:
    - name: eg
      namespace: aibrix-system
  rules:
    # 规则一: 任务提交 (POST /v1/videos)
    - matches:
        - path:
            type: PathPrefix
            value: /api/v1/video/jobs # RESTful 风格的路径
          method: POST
      backendRefs:
        - name: maas-controller-service # 指向您的 MaaS 管控端 Service
          port: 80 # 指向 MaaS 管控端 Service 的端口

    # 规则二: 任务状态查询 (GET /api/v1/video/jobs/*)
    - matches:
        - path:
            type: PathPrefix
            value: /api/v1/video/jobs/ # 使用路径前缀匹配，以支持 /api/v1/video/jobs/{job_id} 这样的 URL
          method: GET
      backendRefs:
        - name: maas-controller-service # 同样指向您的 MaaS 管控端 Service
          port: 80